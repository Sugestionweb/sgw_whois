<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	<template id="whois_check" name="Results of whois a domain">
		<t t-call="website.layout">
			<div class="searchbar borderradius bgdarkgray">
				<form class="form-inline" role="form" id="form_whois"
					name="form_whois"
					t-attf-action="/whois{{ '?debug=assets' if debug else '' }}"
					method="post" onsubmit="this.action = this.action + location.hash;">
					<div class="col-lg-9 col-xs-9">
						<input style="width:100%;" type="text" name="domain"
							t-att-value="domain" id="domain"
							placeholder="Encuentra tu dominio" class="form-control input-lg"
							required="required" autofocus="autofocus" autocapitalize="off" />
					</div>
					<div class="col-lg-2 col-xs-2">
						<button id="search-start" type="submit"
							class="btn-sm btn-success">Consultar</button>

						<input type="hidden" name="csrf_token"
							t-att-value="request.csrf_token()" />
					</div>
				</form>
			</div>
			<img class="center-block" style="visibility:hidden;"
				id='loading_table' src="/sgw_theme/static/images/ajax-loader.gif" />

			<table id="tabla_result"
				style="visibility:hidden;margin-left:40px;"
				class="table table-striped table-hover ">
				<thead>
					<tr>
						<th>Nombre de dominio</th>
						<th>Estado</th>
						<th>Precio</th>
						<th>Registro</th>
					</tr>
				</thead>
				<tbody>

					<t t-foreach="results" t-as="result">
						<tr>
							<t t-set="full_domain" t-value='domain + "." + result '></t>
							<t t-set="product" t-value='results.get(result)[0]'></t>
							<td>
								<t t-esc="full_domain" />
							</td>
							<td t-att-id='"img_resultado_whois_" + str(result)'>
								<img t-att-id='"loading_" + str(result)' style="float:left;"
									src="/sgw_theme/static/images/ajax-loader.gif" />
							</td>
							<t t-set="product" t-value='results.get(result)[0]'></t>
							<td t-att-id='"price_" + str(result)'>
								<span t-field="product.list_price" />
								<span itemprop="priceCurrency"
									t-esc="user_id.partner_id.property_product_pricelist.currency_id.name"
									class='decimal_precision'
									t-att-data-precision="website.pricelist_id.currency_id.rounding" />
							</td>
							<td t-att-id='"link_buy_" + str(result)'>
								<a
									t-attf-href="/shop/product/#{ slug(product)}?domain=#{ full_domain}"
									style="display: block">
									<span t-field='product.name' style="display: block" />
								</a>

							</td>
							<td t-att-id='"button_whois_" + str(result)'></td>
						</tr>
					</t>
				</tbody>

			</table>

			<div style="margin-left:40px;" class="oe_structure oe_empty" />
			<script type="text/javascript">
				window.onload = function () {
				domain_input =
				document.getElementById("domain"),
				value = domain_input.value;
				if
				(value != "") {
				getStatus2(value);
				};
				};
			</script>

			<!-- Modal -->
			<div id="myModal" tabindex="-1" class="modal fade" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close"></button>
							<h4 id="modal_domain_title" class="modal-title">Modal Header</h4>
						</div>
						<div class="modal-body">
							<p id="whois_raw">...Consultando...</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</t>
	</template>
</odoo>